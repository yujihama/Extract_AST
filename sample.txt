1. システム概要
1.1. 概要
本システムは、内部監査業務における「計画」「収集」「検証」「評価」「報告」の全プロセスを統合管理するプラットフォームである。ServiceNow 風のプラットフォームを想定。
従来の「人が全ての証跡を目視確認する監査」から脱却し、「確実なロジック評価」と「AIによる高度な意味理解」を適材適所で組み合わせるハイブリッド監査を実現する。
RCM（リスク・コントロール・マトリクス）を核に、証跡収集から調書作成までを一気通貫でデジタル化し、監査人は「最終判断」と「人にしかできない調査（往査・ヒアリング）」に注力できる環境を提供する。
1.2. コア・コンセプト
 * Hybrid Evaluation（ハイブリッド評価）: 数値などの構造化データは「ロジックエンジン」で高速処理し、非構造化データ（文書・証憑）は「AIエージェント」が読み解く。
 * Human-in-the-Loop（人間中心のAI活用）: AIは判定だけでなく、問い合わせ文案作成や往査チェックリスト生成などの「準備」を行い、最終決定権を持つ人間を強力に支援する。
 * Traceability（完全な証跡性）: 自動収集、AI判定、チャットによる質疑応答、現地往査の記録など、全てのプロセスを監査証跡として一元管理する。
2. 機能構成
本システムは以下の6つの機能モジュール群により構成される。
 * 監査マネジメント機能（基準・計画の管理）※servicenowのイメージ
 * 証跡収集・連携機能（インテリジェント収集ハブ）
 * 事前検証機能（証跡チェックエージェント）
 * サンプリング機能（ダイナミックサンプラー）
 * 自動評価機能（ハイブリッド監査コア）
   * Sub-module: ロジックエンジン
   * Sub-module: 内部監査AIエージェント
 * 監査ワークベンチ・報告機能（統合UI・レポーティング）
3. 機能要件詳細
3.1. 監査マネジメント機能
【設計思想・目的】
監査の「基準（RCM）」と「実行（プロジェクト）」を体系的に管理し、属人化を防ぐこと。どの手続を「機械的」に評価し、どの手続を「AI的」に評価するかを定義する司令塔の役割を果たす。
 * RCMマスタ管理機能
   * 3層構造管理: RCMを以下の階層でデータベース化する。
     * R: リスク
     * C: コントロール 
     * L1: 監査手続（例：旅費交通費の検証）
     * L1_sample: サンプリング（全件、25件サンプリングなど）
     * L2: 確認観点（例：申請金額と領収書の一致、利用目的の妥当性）
     * L3: 必要証跡（例：仕訳データ、領収書PDF）
     * L3_type: 証跡取得タイプ（例： API、ユーザーアップロード） 
   * 評価モード設定: L2観点ごとに、以下の評価エンジンを割り当てる。
     * Logicモード: 数値・日付・フラグ等の確定的ロジック（ERPデータ等向け）。
     * AI Agentモード: 自然言語処理・画像認識（領収書、議事録、規定書等向け）。
   * テンプレート紐付け: 評価結果を出力するための「全体調書」「個別調書」テンプレートを登録する。
 * 監査プロジェクト作成機能
   * 対象年度、対象部門を指定し、プロジェクトを作成する。その際、RCMマスタかテンプレートをコピーされる。
   * RCMテンプレートに対して必要に応じて追加変更削除を行い登録する。
   * 対象となる全ての手続について「監査タスクチケット」を自動発行する。
   * 被監査部門には証跡格納用のチケットが自動発行される。（L3_type に関わらず発行）
 * プロセスステータス管理
   * チケットの進捗（未着手、証跡収集中、検証中、評価中、レビュー待ち、完了）を管理する。※AIによる「判定結果（OK/NG）」とは区別して、あくまで進捗として管理する。
3.2. 証跡収集・連携機能（インテリジェント収集ハブ）
【設計思想・目的】
監査において最も工数のかかる「証跡集め」と「紐付け作業」を自動化すること。被監査部門の負担を減らし、かつ提出されたデータの完全性を担保する。
 * 被監査部門ポータル（被監査部門のロールの場合のみ表示）
   * 被監査部門が自分のチケットの確認や対応を行うためのポータル。
   * L3_type に応じて 自動収集コネクタ か 証跡アップロード にて証跡を格納する。
   * ここにアップロードされたファイルは、システムが自動的に当該監査手続（L1~L3）に紐付ける。
 * 証跡アップロード
   * サンプリング後に収集する場合は先に3.4 サンプリングを実施する 
   * 被監査部門ユーザーに対し、タスクごとに定義された「L3: 必要証跡」のアップロード枠を表示する。
 * 自動収集コネクタ（API/RPA）
   * ERP（SAP等）、経費精算システム、ワークフローシステム等の外部システムと連携する。
   * L3_type に応じて、トランザクションデータやマスタデータを自動取得し格納する。
 * コミュニケーション機能
   * チケットで管理
   * 提出依頼、督促、追加質問のやり取りを全てログとして保存し、監査証跡の一部とする。
3.3. 事前検証機能（証跡チェックエージェント）
【設計思想・目的】
「Garbage In, Garbage Out（質の悪いデータからは質の悪い結果しか出ない）」を防ぐゲートキーパー。AI評価の前段で、評価に値する品質かどうかを保証し、無駄な評価コストを削減する。
 * リアルタイム形式検証
   * ファイルアップロード直後に、破損、パスワード保護、ファイル形式、ファイルサイズ、LLMによる可読性（解像度不足や白紙など）を検証する。
 * 要件適合性検証
   * メタデータを解析し、対象期間（監査対象年度か）や必須カラムの有無をチェックする。
 * 例外ハンドリング（特例通過フロー）
   * NG時の動作: 基本的に即座にエラーを返し、再提出を求める。
   * 特例通過: ユーザーが「証跡が存在しない正当な理由（例：紛失届提出済み）」をコメント入力した場合、LLMにて判断のうえ**ステータス「Exception_Allowed」**として通過させる。
   * データ継承: 入力されたコメントは、後続のAIエージェントに「コンテキスト情報」として引き渡す。
3.4. サンプリング機能（ダイナミックサンプラー）
【設計思想・目的】
L2によっては全量データの中から、リスクアプローチに基づいて効率的に評価対象を選定することが必要。必要かはRCMで管理。
 * 抽出ロジック実行
   * 事前検証を通過（または特例通過）した有効な母集団に対し、以下のロジックを実行する。
     * ランダムサンプリング: 指定件数または割合で抽出。
     * 全件評価: ロジック評価など、コストが低い場合に適用。
     * リスクベース: 「金額が高い」「特定の勘定科目」などの条件で優先抽出。
3.5. 自動評価機能（ハイブリッド監査コア）
【設計思想・目的】
本プラットフォームの心臓部。定型的なチェックは厳密に、非定型なチェックは柔軟に行うことで、人間と同等以上の精度とスピードを両立する。
 * 評価ディスパッチャー
   * タスクの「L2設定」に基づき、処理を「ロジックエンジン」または「内部監査AIエージェント」へ振り分ける。
 * Sub-module A: ロジックエンジン（ルールベース評価）
   主にシステム連携で取得した構造化データ間のルールベースでの評価の場合はこちらを使用。
   * 機能: 数値比較（A=B）、日付前後関係（申請日≦承認日）、マスタ突合などを実行する。
   * 出力: 判定結果（OK/NG）と計算ログを即座にDBへ保存する。
 * Sub-module B: 内部監査AIエージェント（LLM評価）
   * 入力: RCM（観点）、証跡ファイル、事前検証時の特例コメント。
   * 評価プロセス:
     * 大規模言語モデル（LLM）を用い、証跡の内容を読み解く。
     * 特例コメントがある場合は、その理由の妥当性も含めて判断する。
   * 判定出力: 以下のステータスと根拠要約を出力する。
     * 🟢 不備なし: 証跡・内容ともに適切。
     * 🔴 不備あり: 明らかな規定違反や不整合あり。
     * 🟡 要レビュー: 確信度が低い、または判断に人間の裁量が必要。
   * ネクストアクション生成（AI Assist）:
     * 不備（🔴）や要レビュー（🟡）の場合、その内容に基づき以下のドラフトを生成する。
       * 問い合わせ案: 被監査部門へ確認するためのメール/チャット文面。
       * 往査チェックリスト: 現地確認が必要な場合の確認項目リスト。
       * 調書（ドラフト版）: 指定された調書にこの時点の内容を記載する。
3.6. 監査ワークベンチ・報告機能（Human-in-the-Loop UI）
【設計思想・目的】
監査人の「意思決定」を支援するコックピット。AIの結果を鵜呑みにせず、人間が効率的にレビューし、必要に応じて「追加調査」という現場のアクションへ繋げるためのUI。
 * 統合レビュー画面（2ペイン構成）
   * 左：R,C,L1,L2などて階層化したリスト: AI判定結果（🟢🔴🟡）でフィルタリング可能。
   * 右：判定・アクションパネル: Logic/AIの結果詳細、チャット履歴、操作ボタンを集約。
 * AI支援付き追加アクション実行
   * 問い合わせ実行: AIが生成した「問い合わせ案」をワンクリックでチャット欄に展開。監査人は微修正して送信できる。回答は自動的に証跡化される。
   * 往査チェックリストの表示
   * 手動ログ（往査・インタビュー）登録:
     * AI生成の「チェックリスト」を見ながら往査を実施。
     * 実施日時、相手方、結果、現場写真などを登録すると証跡ファイルの一つとして格納される。
 * Human-in-the-Loop操作（修正・確定）
   * 承認: AI/Logicの結果で確定させる。
   * 修正: 人間が結果を上書きし、コメントを残す。
   * 再実行: 問い合わせや往査の結果も追加してAI評価をやり直す（エージェント機能の呼び出し）。
 * 統合調書生成
   * Logic/AIの自動判定結果に加え、人間が行った「問い合わせ」や「手動ログ」の内容も全て統合する。
   * 指定されたExcelテンプレートにデータを流し込み、完成された監査調書として出力する。
   * 実施した監査のメタデータ、結果などを踏まえて報告書を作成して出力する。スライド形式の報告会資料も作成する。
4. 外部システム連携仕様
4.1. データフロー設計
 * 社内システム → プラットフォーム:
   * 自動収集コネクタにより、ERP等の構造化データを取り込む（Logic評価のソース）。
 * プラットフォーム ⇔ 内部監査AIエージェント（モジュール間連携）:
   * プラットフォームは「タスク・RCM・ファイル・コメント」をエージェントに渡す。
   * エージェントは「評価結果・根拠・ドラフト（問い合わせ/チェックリスト）」を返す。
